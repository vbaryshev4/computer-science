# 06

## Области видимости

Что произойдет если выполнить следующий код? Почему?
Ответ к задаче 1: print ищет локальную переменную из области видимости def fn()
Выдает ошибку, поскольку а объявляется позже принта. UnboundLocalError: local variable 'a' referenced before assignment 

1.
```python
a = 10

def fn():
    print(a)
    a = 20

fn()
```

2.
Ответ к задаче 2:
STDOUT >>>>
20
10

```python
a = 10

def fn():
    a = 20
    print(a)

fn()
print(a)
```

3. 
Ответ к задаче 2:
STDOUT >>>>
20
20

```python
a = 10

def fn():
    global a
    a = 20
    print(a)

fn()
print(a)
```

## Замыкания

1. Что такое замыкание?
Ответ: 
В общем случае, операция комбинирования объектов данных обладает свойством замыкания в том случае, если результаты соединения объектов с помощью этой операции сами могут соединяться этой же операцией.

Нужно для:
Устранение жестко кодированных констант
Устранение в коде глобальных переменных
+ файл реверса замыканий приложен в папке hw06. 


2. Что произойдет если выполнить этот код
Ответ: ничего. Но если изменить return a на print(a), то STDOUT будет 20.
```python
def fn1(a):
    def fn2():
        return a
    a += 10
    return fn2

f = fn1(10)
f() 
```

2. Как пользоваться этим замыканием, что оно делает?
```python
Ответ: не совсем понятно. Как минимум отсутствует переменная b

def closure(a):
    def fn(b):
        return a + b

add10 = closure(10)
```

**********
*Закладка*
**********

## Функции высшего порядка

Для начала допустим у нас есть список пользователей следующего вида:

```
data = [
    {
        'age': <Int>,
        'name': <String>,
        'username': <String>,
    },
    ...
]
```

## Фильтрация

Предположим, что нам нужно написать функцию-фильтр. Это такая функция, которая фильтрует данный список по функции-предикату. Функция-предикат, это такая функция которая возвращает True или False. Например: 

```python
def is_user_over_18(user):
    return user.get('age') > 18
```

Такой предикат возвращает True, если у данного аргумента свойство `'age'` больше 18

```python
def filter(predicate, fn):
    pass

users_over_18 = filter(is_user_over_18, data)  #список всех пользователей старше 18
```

Напиши функцию `filter`

## Преобразование

Частой задачей является преобразование списка. Например у нас есть список чисел и нам нужно получить список их квадратов: 

`[1, 2, 3, 4] -> [1, 4, 9, 16]`

Хотелось бы иметь специальную функцию, которая бы применяла данную функцию к каждому элементу в списке.

```python
def square(number):
    return number ** 2

def map(mapper, fn):
    pass

squares = map(square, [1, 2, 3, 4])
```

Напиши функцию `map`
